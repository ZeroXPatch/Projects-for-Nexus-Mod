<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <!-- Stardew Valley 1.6 + SMAPI 4.x -->
    <TargetFramework>net6.0</TargetFramework>

    <!-- SMAPI mods: keep output lean + avoid nullable metadata issues -->
    <Nullable>disable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>

    <!-- Optional -->
    <LangVersion>latest</LangVersion>
    <Platforms>AnyCPU;x64</Platforms>
    <RootNamespace>CaveWeather</RootNamespace>

    <!-- This helps keep the mod folder clean -->
    <CopyLocalLockFileAssemblies>false</CopyLocalLockFileAssemblies>
  </PropertyGroup>

  <ItemGroup>
    <Reference Include="MonoGame.Framework">
      <HintPath>..\..\..\..\..\..\..\GOG Games\Stardew Valley\MonoGame.Framework.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="SMAPI.Toolkit.CoreInterfaces">
      <HintPath>..\..\..\..\..\..\..\GOG Games\Stardew Valley\smapi-internal\SMAPI.Toolkit.CoreInterfaces.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="Stardew Valley">
      <HintPath>..\..\..\..\..\..\..\GOG Games\Stardew Valley\Stardew Valley.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="StardewModdingAPI">
      <HintPath>..\..\..\..\..\..\..\GOG Games\Stardew Valley\StardewModdingAPI.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="StardewValley.GameData">
      <HintPath>..\..\..\..\..\..\..\GOG Games\Stardew Valley\StardewValley.GameData.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="xTile">
      <HintPath>..\..\..\..\..\..\..\GOG Games\Stardew Valley\xTile.dll</HintPath>
      <Private>false</Private>
    </Reference>
  </ItemGroup>

  <!-- Post-build: copy ONLY what the mod needs -->
  <Target Name="PostBuild" AfterTargets="Build">
    <Exec Command='
      mkdir "C:\GOG Games\Stardew Valley\Mods\CaveWeather" 2&gt;nul
      copy /Y "$(TargetPath)" "C:\GOG Games\Stardew Valley\Mods\CaveWeather\"
      copy /Y "$(ProjectDir)manifest.json" "C:\GOG Games\Stardew Valley\Mods\CaveWeather\"
      if exist "$(ProjectDir)i18n" xcopy /E /Y /I "$(ProjectDir)i18n" "C:\GOG Games\Stardew Valley\Mods\CaveWeather\i18n\"
    ' />
  </Target>

</Project>
